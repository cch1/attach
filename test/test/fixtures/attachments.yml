# Read about fixtures at http://ar.rubyonrails.org/classes/Fixtures.html
<%
def digest(name)
  fn = File.join(RAILS_ROOT, 'test', 'fixtures', 'attachments', name)
  data = File.open(fn,'rb').read
  digest = Digest::MD5.digest(data)
  "!binary | #{[digest].pack('m')}\n"
end

def file_fixture(fn)
  File.join(Attachment::FILE_STORE, fn)
end
%>

one:
  uri: <%= file_fixture('plus.png') %>
  content_type: image/png
  digest: <%= digest('plus.png') %>
  size: 1
  aspect: ~
  filename: plus.png
  metadata: ~
  description: My Description
  parent: ~
  attachee: chris (User)

one_thumbnail:
  uri: <%= file_fixture('plus_thumbnail.png') %>
  content_type: image/png
  digest: ~
  size: 1
  aspect: thumbnail
  filename: MyString
  metadata: ~
  description: ~
  parent: one
  attachee: chris (User)

two:
  uri: <%= file_fixture('rails.png') %>
  content_type: image/png
  digest: ~
  size: 1
  aspect: ~
  filename: MyString
  metadata: "<%= {:time => DateTime.parse('Mon, 16 Nov 1998 11:39:37 +0000')}.to_yaml %>"
  description: ~
  parent: ~
  attachee: chris (User)

sss:
  uri: <%= file_fixture('SperrySlantStar.bmp') %>
  content_type: image/bmp
  digest: ~
  size: 1
  aspect: ~
  filename: SperrySlantStar.bmp
  metadata: ~
  description: ~
  parent: ~
  attachee: chris (User)