# Read about fixtures at http://ar.rubyonrails.org/classes/Fixtures.html
<%
def digest(name)
  fn = File.join(Fixtures::FILE_STORE, name)
  data = File.open(fn,'rb').read
  digest = Digest::MD5.digest(data)
  "!binary | #{[digest].pack('m')}\n"
end

def size(name)
  fn = File.join(Fixtures::FILE_STORE, name)
  File.size(fn)
end
%>

one:
  uri: <%= Attachment.storage_uri('plus', nil, :png) %>
  content_type: image/png
  digest: <%= digest('plus.png') %>
  size: <%= size('plus.png') %>
  aspect: ~
  filename: plus.png
  metadata: ~
  description: My Description
  parent: ~
one_thumbnail:
  uri: <%= Attachment.storage_uri('plus', 'thumbnail', :png) %>
  content_type: image/png
  digest: <%= digest('plus_thumbnail.png') %>
  size: <%= size('plus_thumbnail.png') %>
  aspect: thumbnail
  filename: MyString
  metadata: ~
  description: ~
  parent: one
two:
  uri: <%= Attachment.storage_uri('rails', nil, :png) %>
  content_type: image/png
  digest: <%= digest('rails.png') %>
  size: <%= size('rails.png') %>
  aspect: ~
  filename: MyString
  metadata: "<%= {:time => DateTime.parse('Mon, 16 Nov 1998 11:39:37 +0000')}.to_yaml %>"
  description: ~
  parent: ~
sss:
  uri: <%= Attachment.storage_uri('SperrySlantStar', nil, :bmp) %>
  content_type: image/bmp
  digest: <%= digest('SperrySlantStar.bmp') %>
  size: <%= size('SperrySlantStar.bmp') %>
  aspect: ~
  filename: SperrySlantStar.bmp
  metadata: ~
  description: ~
  parent: ~
remote:
  uri: http://cho.hapgoods.com/icons/powered_by_fedora.png
  content_type: image/png
  digest: ~
  size: ~
  aspect: ~
  filename: powered_by_fedora.png
  metadata: ~
  description: ~
  parent: ~
missing:
  uri: <%= Attachment.storage_uri('xrails', nil, :png) %>
  content_type: image/png
  digest: <%= digest('rails.png') %>
  size: <%= size('rails.png') %>
  aspect: ~
  filename: MyString
  metadata: "<%= {:time => DateTime.parse('Mon, 16 Nov 1998 11:39:37 +0000')}.to_yaml %>"
  description: ~
  parent: ~